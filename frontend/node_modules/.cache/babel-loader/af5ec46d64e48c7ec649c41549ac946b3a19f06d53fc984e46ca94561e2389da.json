{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../context/AuthContext';import{Plus,X}from'lucide-react';import CreateProductModal from'./CreateProductModal';import api from'../api/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AddProductPage=()=>{const{auth}=useAuth();// Core state\nconst[brand,setBrand]=useState('');const[category,setCategory]=useState('');const[products,setProducts]=useState([]);const[selectedProduct,setSelectedProduct]=useState(null);// Variations state\nconst[variations,setVariations]=useState([]);const[invalidSalePrices,setInvalidSalePrices]=useState([]);// Strain autocomplete state\nconst[availableStrains,setAvailableStrains]=useState([]);const[filteredStrains,setFilteredStrains]=useState([]);const[dropdownVisible,setDropdownVisible]=useState(false);const[activeDropdownIndex,setActiveDropdownIndex]=useState(null);// Modal state\nconst[isCreateModalOpen,setIsCreateModalOpen]=useState(false);const[searchAttempted,setSearchAttempted]=useState(false);// Fetch products when brand or category changes\nuseEffect(()=>{if(brand){setSearchAttempted(true);api.get(`/api/products/filters`,{params:{brand:brand,category:category}}).then(response=>{const validProducts=response.data.filter(product=>product&&product._id);const uniqueProducts=Array.from(new Map(validProducts.map(product=>[product._id,product])).values());setProducts(uniqueProducts);}).catch(error=>{console.error('Error fetching products:',error);setProducts([]);});}else{setProducts([]);setSearchAttempted(false);}},[brand,category]);// Fetch available strains\nuseEffect(()=>{const fetchStrains=async()=>{try{const response=await api.get('/api/strains');setAvailableStrains(response.data);setFilteredStrains(response.data);}catch(error){console.error('Error fetching strains:',error);setAvailableStrains([]);setFilteredStrains([]);}};fetchStrains();},[]);// Handlers for product selection and variation management\nconst handleProductSelect=product=>{var _product$images;setSelectedProduct(product);setBrand(product.brand);setVariations([{amount:'',strain:'',price:'',salePrice:'',thcContent:'',image:((_product$images=product.images)===null||_product$images===void 0?void 0:_product$images[0])||'',tags:[]// Initialize empty tags array\n}]);};const handleAddVariation=()=>{setVariations(prev=>{var _selectedProduct$imag;return[...prev,{amount:'',strain:'',price:'',salePrice:'',thcContent:'',image:(selectedProduct===null||selectedProduct===void 0?void 0:(_selectedProduct$imag=selectedProduct.images)===null||_selectedProduct$imag===void 0?void 0:_selectedProduct$imag[0])||'',tags:[]// Initialize empty tags array\n}];});};const handleRemoveVariation=index=>{setVariations(prev=>prev.filter((_,i)=>i!==index));};const handleVariationChange=(index,key,value)=>{setVariations(prev=>prev.map((v,i)=>i===index?{...v,[key]:value}:v));if(key==='strain'&&value.trim()){setFilteredStrains(availableStrains.filter(strain=>strain.name.toLowerCase().includes(value.toLowerCase())));setActiveDropdownIndex(index);setDropdownVisible(true);}};const handleTagToggle=(index,tag)=>{setVariations(prev=>prev.map((v,i)=>{if(i===index){const currentTags=v.tags||[];const newTags=currentTags.includes(tag)?currentTags.filter(t=>t!==tag):[...currentTags,tag];return{...v,tags:newTags};}return v;}));};const handleSelectStrain=(index,strain)=>{handleVariationChange(index,'strain',`${strain.name} (${strain.classification.substring(0,3).toUpperCase()})`);setDropdownVisible(false);setActiveDropdownIndex(null);};const handleImageSelect=(index,image)=>{handleVariationChange(index,'image',image);};const handleAddToInventory=async()=>{setInvalidSalePrices([]);if(!selectedProduct||variations.some(v=>!v.amount||!v.strain||!v.price||!v.image)){alert('Please fill out all required fields for each variation.');return;}const invalidIndices=variations.reduce((acc,variation,index)=>{if(variation.salePrice&&parseFloat(variation.salePrice)>=parseFloat(variation.price)){acc.push(index);}return acc;},[]);if(invalidIndices.length>0){setInvalidSalePrices(invalidIndices);alert('Sale price must be less than regular price.');return;}try{await Promise.all(variations.map(variation=>api.post('/api/vendor/inventory',{vendorId:auth.vendorId,productId:selectedProduct._id,name:selectedProduct.name,category:selectedProduct.category,brand:selectedProduct.brand,description:selectedProduct.description,amounts:selectedProduct.amount,variation:{amount:variation.amount,strain:variation.strain,thcContent:variation.thcContent?parseFloat(variation.thcContent):undefined,price:parseFloat(variation.price),salePrice:variation.salePrice?parseFloat(variation.salePrice):undefined,image:variation.image,tags:variation.tags||[]}})));alert('Products added successfully!');resetForm();const event=new CustomEvent('inventoryUpdated');window.dispatchEvent(event);}catch(error){console.error('Error adding products:',error);alert('An error occurred while adding the products.');}};const handleCreateProduct=async formData=>{try{const productFormData=new FormData();productFormData.append('name',formData.name);productFormData.append('brand',formData.brand);productFormData.append('category',formData.category);productFormData.append('description',formData.description);productFormData.append('amount',JSON.stringify(formData.variations.map(v=>v.amount)));formData.variations.forEach((variation,index)=>{if(variation.image){productFormData.append('images',variation.image,`product-${index}-${Date.now()}.jpg`);}});const response=await api.post('/api/products',productFormData,{headers:{'Content-Type':'multipart/form-data'}});if(!response.ok){const errorData=await response.json();throw new Error(errorData.message||`HTTP error! status: ${response.status}`);}const productData=await response.json();await Promise.all(formData.variations.map(async(variation,index)=>{const vendorProductData={vendorId:auth.vendorId,productId:productData._id,name:formData.name,category:formData.category,brand:formData.brand,description:formData.description,amounts:formData.variations.map(v=>v.amount),variation:{amount:variation.amount,strain:variation.strain,thcContent:variation.thcContent?parseFloat(variation.thcContent):undefined,price:parseFloat(variation.price),salePrice:variation.salePrice?parseFloat(variation.salePrice):undefined,image:productData.images[index],tags:variation.tags||[]// Include tags in the request\n},status:'Active'};const vendorProductResponse=await api.post('/api/vendor/inventory',vendorProductData);if(!vendorProductResponse.data){throw new Error(`Failed to create vendor product variation ${index+1}`);}}));alert('Products added to inventory successfully!');setIsCreateModalOpen(false);resetForm();const event=new CustomEvent('inventoryUpdated');window.dispatchEvent(event);}catch(error){console.error('Error creating products:',error);alert(`An error occurred while creating the products: ${error.message}`);}};const resetForm=()=>{setBrand('');setCategory('');setSelectedProduct(null);setVariations([]);setInvalidSalePrices([]);setSearchAttempted(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add Product to Menu\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-semibold\",children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:category,onChange:e=>setCategory(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Category\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Flower\",children:\"Flower\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pre-roll\",children:\"Pre-roll\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Vape\",children:\"Vape\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Edible\",children:\"Edible\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Extract\",children:\"Concentrate\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Tincture\",children:\"Tincture\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Gear\",children:\"Gear\"})]})]}),category&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-semibold\",children:\"Brand\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Enter brand name\",value:brand,onChange:e=>setBrand(e.target.value)})]}),searchAttempted&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-semibold\",children:\"Products from Master Catalog\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"list-group mb-3\",children:[products.length>0?products.map(product=>{var _product$images2,_product$amount;return/*#__PURE__*/_jsx(\"li\",{className:`list-group-item ${(selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct._id)===product._id?'active':''}`,onClick:()=>handleProductSelect(product),style:{cursor:'pointer'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[((_product$images2=product.images)===null||_product$images2===void 0?void 0:_product$images2[0])&&/*#__PURE__*/_jsx(\"img\",{src:product.images[0],alt:product.name,className:\"me-3\",style:{width:'40px',height:'40px',objectFit:'cover'}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:product.brand}),\" - \",product.name,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"Available amounts: \",(_product$amount=product.amount)===null||_product$amount===void 0?void 0:_product$amount.join(', ')]})]})]})},product._id);}):/*#__PURE__*/_jsx(\"div\",{className:\"list-group-item text-center text-muted\",children:\"No matching products found\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"list-group-item list-group-item-action d-flex align-items-center justify-content-center text-primary\",onClick:()=>setIsCreateModalOpen(true),children:[/*#__PURE__*/_jsx(Plus,{className:\"w-5 h-5 mr-2\"}),\"Create New Product\"]})]})]}),selectedProduct&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Variations\"}),variations.map((variation,index)=>{var _selectedProduct$amou,_variation$tags,_variation$tags2,_variation$tags3;return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-md font-medium\",children:[\"Variation #\",index+1]}),index>0&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleRemoveVariation(index),className:\"text-red-500 hover:text-red-700\",children:/*#__PURE__*/_jsx(X,{className:\"h-5 w-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-semibold\",children:\"Select Image\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex overflow-auto\",style:{maxWidth:'100%',gap:'10px'},children:selectedProduct.images.map((image,imgIndex)=>/*#__PURE__*/_jsx(\"img\",{src:image,alt:`Product Image ${imgIndex+1}`,onClick:()=>handleImageSelect(index,image),className:`img-thumbnail ${variation.image===image?'border-primary':''}`,style:{cursor:'pointer',width:'250px',height:'250px',objectFit:'cover',borderWidth:variation.image===image?'3px':'1px'}},imgIndex))})]}),category!=='Gear'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-semibold\",children:\"Amount\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:variation.amount,onChange:e=>handleVariationChange(index,'amount',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"Select Amount\"}),selectedProduct===null||selectedProduct===void 0?void 0:(_selectedProduct$amou=selectedProduct.amount)===null||_selectedProduct$amou===void 0?void 0:_selectedProduct$amou.map((option,i)=>/*#__PURE__*/_jsx(\"option\",{value:option,children:option},i))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 position-relative\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-semibold\",children:\"Strain\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:variation.strain,onChange:e=>handleVariationChange(index,'strain',e.target.value),onFocus:()=>{if(variation.strain.trim()){setActiveDropdownIndex(index);setDropdownVisible(true);}},onBlur:()=>setTimeout(()=>{setDropdownVisible(false);setActiveDropdownIndex(null);},100)}),index===activeDropdownIndex&&dropdownVisible&&filteredStrains.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"dropdown-menu show position-absolute\",style:{zIndex:10},children:filteredStrains.map((strain,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"dropdown-item\",onMouseDown:()=>handleSelectStrain(index,strain),children:[strain.name,\" (\",strain.classification.substring(0,3).toUpperCase(),\")\"]},i))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-semibold\",children:\"Price ($)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:variation.price,onChange:e=>handleVariationChange(index,'price',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-semibold\",children:\"Sale Price ($)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:`form-control ${invalidSalePrices.includes(index)?'is-invalid':''}`,placeholder:\"Optional\",value:variation.salePrice,onChange:e=>handleVariationChange(index,'salePrice',e.target.value)}),invalidSalePrices.includes(index)&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:\"Sale price must be less than regular price\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-semibold\",children:\"THC Content (%)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Optional\",value:variation.thcContent,onChange:e=>handleVariationChange(index,'thcContent',e.target.value.replace(/[^0-9.]/g,''))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-semibold\",children:\"Tags\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"form-check-input\",checked:((_variation$tags=variation.tags)===null||_variation$tags===void 0?void 0:_variation$tags.includes('Staff Pick'))||false,onChange:()=>handleTagToggle(index,'Staff Pick')}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",children:\"Staff Pick\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"form-check-input\",checked:((_variation$tags2=variation.tags)===null||_variation$tags2===void 0?void 0:_variation$tags2.includes('High THC'))||false,onChange:()=>handleTagToggle(index,'High THC')}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",children:\"High THC\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"form-check-input\",checked:((_variation$tags3=variation.tags)===null||_variation$tags3===void 0?void 0:_variation$tags3.includes('Low THC'))||false,onChange:()=>handleTagToggle(index,'Low THC')}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",children:\"Low THC\"})]})]})]})]},index);}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column align-items-start gap-4\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary shadow-sm\",onClick:handleAddVariation,style:{width:'150px',height:'150px',backgroundColor:'#DBDBDB',color:'#333333',fontSize:'1.2rem',display:'flex',alignItems:'center',justifyContent:'center',border:'1px',borderRadius:'8px',boxShadow:'0 4px 6px rgba(0, 0, 0, 0.1)',transition:'transform 0.2s'},onMouseOver:e=>e.currentTarget.style.transform='translateY(-2px)',onMouseOut:e=>e.currentTarget.style.transform='translateY(0)',children:[/*#__PURE__*/_jsx(Plus,{className:\"w-5 h-5 mr-2\"}),\"Add Variation\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary rounded-pill shadow-sm w-100 mb-5\",onClick:handleAddToInventory,style:{backgroundColor:'#0056b3',padding:'15px 30px',fontSize:'1.2rem',border:'none',boxShadow:'0 4px 6px rgba(0, 0, 0, 0.1)',transition:'transform 0.2s'},onMouseOver:e=>e.currentTarget.style.transform='translateY(-2px)',onMouseOut:e=>e.currentTarget.style.transform='translateY(0)',children:\"Add to Menu\"})]})]}),/*#__PURE__*/_jsx(CreateProductModal,{show:isCreateModalOpen,onClose:()=>setIsCreateModalOpen(false),onSubmit:handleCreateProduct}),/*#__PURE__*/_jsx(\"div\",{style:{height:'300px'}})]});};export default AddProductPage;","map":{"version":3,"names":["React","useState","useEffect","useAuth","Plus","X","CreateProductModal","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AddProductPage","auth","brand","setBrand","category","setCategory","products","setProducts","selectedProduct","setSelectedProduct","variations","setVariations","invalidSalePrices","setInvalidSalePrices","availableStrains","setAvailableStrains","filteredStrains","setFilteredStrains","dropdownVisible","setDropdownVisible","activeDropdownIndex","setActiveDropdownIndex","isCreateModalOpen","setIsCreateModalOpen","searchAttempted","setSearchAttempted","get","params","then","response","validProducts","data","filter","product","_id","uniqueProducts","Array","from","Map","map","values","catch","error","console","fetchStrains","handleProductSelect","_product$images","amount","strain","price","salePrice","thcContent","image","images","tags","handleAddVariation","prev","_selectedProduct$imag","handleRemoveVariation","index","_","i","handleVariationChange","key","value","v","trim","name","toLowerCase","includes","handleTagToggle","tag","currentTags","newTags","t","handleSelectStrain","classification","substring","toUpperCase","handleImageSelect","handleAddToInventory","some","alert","invalidIndices","reduce","acc","variation","parseFloat","push","length","Promise","all","post","vendorId","productId","description","amounts","undefined","resetForm","event","CustomEvent","window","dispatchEvent","handleCreateProduct","formData","productFormData","FormData","append","JSON","stringify","forEach","Date","now","headers","ok","errorData","json","Error","message","status","productData","vendorProductData","vendorProductResponse","className","children","onChange","e","target","type","placeholder","_product$images2","_product$amount","onClick","style","cursor","src","alt","width","height","objectFit","join","_selectedProduct$amou","_variation$tags","_variation$tags2","_variation$tags3","maxWidth","gap","imgIndex","borderWidth","disabled","option","onFocus","onBlur","setTimeout","zIndex","onMouseDown","replace","checked","backgroundColor","color","fontSize","display","alignItems","justifyContent","border","borderRadius","boxShadow","transition","onMouseOver","currentTarget","transform","onMouseOut","padding","show","onClose","onSubmit"],"sources":["/Users/home/Desktop/weedhurry-platform/v1/frontend/src/components/AddProductPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { Plus, X } from 'lucide-react';\nimport CreateProductModal from './CreateProductModal';\nimport api from '../api/api';\n\nconst AddProductPage = () => {\n  const { auth } = useAuth();\n  \n  // Core state\n  const [brand, setBrand] = useState('');\n  const [category, setCategory] = useState('');\n  const [products, setProducts] = useState([]);\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  \n  // Variations state\n  const [variations, setVariations] = useState([]);\n  const [invalidSalePrices, setInvalidSalePrices] = useState([]);\n  \n  // Strain autocomplete state\n  const [availableStrains, setAvailableStrains] = useState([]);\n  const [filteredStrains, setFilteredStrains] = useState([]);\n  const [dropdownVisible, setDropdownVisible] = useState(false);\n  const [activeDropdownIndex, setActiveDropdownIndex] = useState(null);\n  \n  // Modal state\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n  const [searchAttempted, setSearchAttempted] = useState(false);\n\n  // Fetch products when brand or category changes\n  useEffect(() => {\n    if (brand) {\n      setSearchAttempted(true);\n      api.get(`/api/products/filters`, {\n        params: {\n          brand: brand,\n          category: category\n        }\n      })\n        .then((response) => {\n          const validProducts = response.data.filter(product => product && product._id);\n          const uniqueProducts = Array.from(\n            new Map(validProducts.map(product => [product._id, product])).values()\n          );\n          setProducts(uniqueProducts);\n        })\n        .catch((error) => {\n          console.error('Error fetching products:', error);\n          setProducts([]);\n        });\n    } else {\n      setProducts([]);\n      setSearchAttempted(false);\n    }\n  }, [brand, category]);\n\n  // Fetch available strains\n  useEffect(() => {\n    const fetchStrains = async () => {\n      try {\n        const response = await api.get('/api/strains');  \nsetAvailableStrains(response.data);\nsetFilteredStrains(response.data);\n      } catch (error) {\n        console.error('Error fetching strains:', error);\n        setAvailableStrains([]);\n        setFilteredStrains([]);\n      }\n    };\n  \n    fetchStrains();\n  }, []);\n\n  // Handlers for product selection and variation management\n  const handleProductSelect = (product) => {\n    setSelectedProduct(product);\n    setBrand(product.brand);\n    setVariations([{\n      amount: '',\n      strain: '',\n      price: '',\n      salePrice: '',\n      thcContent: '',\n      image: product.images?.[0] || '',\n      tags: [], // Initialize empty tags array\n    }]);\n  };\n\n  const handleAddVariation = () => {\n    setVariations(prev => [\n      ...prev,\n      {\n        amount: '',\n        strain: '',\n        price: '',\n        salePrice: '',\n        thcContent: '',\n        image: selectedProduct?.images?.[0] || '',\n        tags: [], // Initialize empty tags array\n      }\n    ]);\n  };\n\n  const handleRemoveVariation = (index) => {\n    setVariations(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const handleVariationChange = (index, key, value) => {\n    setVariations(prev => prev.map((v, i) => \n      i === index ? { ...v, [key]: value } : v\n    ));\n\n    if (key === 'strain' && value.trim()) {\n      setFilteredStrains(\n        availableStrains.filter(strain =>\n          strain.name.toLowerCase().includes(value.toLowerCase())\n        )\n      );\n      setActiveDropdownIndex(index);\n      setDropdownVisible(true);\n    }\n  };\n\n  const handleTagToggle = (index, tag) => {\n    setVariations(prev => prev.map((v, i) => {\n      if (i === index) {\n        const currentTags = v.tags || [];\n        const newTags = currentTags.includes(tag)\n          ? currentTags.filter(t => t !== tag)\n          : [...currentTags, tag];\n        return { ...v, tags: newTags };\n      }\n      return v;\n    }));\n  };\n\n  const handleSelectStrain = (index, strain) => {\n    handleVariationChange(\n      index,\n      'strain',\n      `${strain.name} (${strain.classification.substring(0, 3).toUpperCase()})`\n    );\n    setDropdownVisible(false);\n    setActiveDropdownIndex(null);\n  };\n\n  const handleImageSelect = (index, image) => {\n    handleVariationChange(index, 'image', image);\n  };\n\n  const handleAddToInventory = async () => {\n    setInvalidSalePrices([]);\n    \n    if (!selectedProduct || variations.some(v => \n      !v.amount || !v.strain || !v.price || !v.image\n    )) {\n      alert('Please fill out all required fields for each variation.');\n      return;\n    }\n  \n    const invalidIndices = variations.reduce((acc, variation, index) => {\n      if (variation.salePrice && parseFloat(variation.salePrice) >= parseFloat(variation.price)) {\n        acc.push(index);\n      }\n      return acc;\n    }, []);\n  \n    if (invalidIndices.length > 0) {\n      setInvalidSalePrices(invalidIndices);\n      alert('Sale price must be less than regular price.');\n      return;\n    }\n  \n    try {\n      await Promise.all(variations.map(variation =>\n        api.post('/api/vendor/inventory', {\n          vendorId: auth.vendorId,\n          productId: selectedProduct._id,\n          name: selectedProduct.name,\n          category: selectedProduct.category,\n          brand: selectedProduct.brand,\n          description: selectedProduct.description,\n          amounts: selectedProduct.amount,\n          variation: {\n            amount: variation.amount,\n            strain: variation.strain,\n            thcContent: variation.thcContent ? parseFloat(variation.thcContent) : undefined,\n            price: parseFloat(variation.price),\n            salePrice: variation.salePrice ? parseFloat(variation.salePrice) : undefined,\n            image: variation.image,\n            tags: variation.tags || [],\n          }\n        })\n      ));\n  \n      alert('Products added successfully!');\n      resetForm();\n      \n      const event = new CustomEvent('inventoryUpdated');\n      window.dispatchEvent(event);\n    } catch (error) {\n      console.error('Error adding products:', error);\n      alert('An error occurred while adding the products.');\n    }\n  };\n\n  const handleCreateProduct = async (formData) => {\n    try {\n      const productFormData = new FormData();\n      \n      productFormData.append('name', formData.name);\n      productFormData.append('brand', formData.brand);\n      productFormData.append('category', formData.category);\n      productFormData.append('description', formData.description);\n      productFormData.append('amount', JSON.stringify(formData.variations.map(v => v.amount)));\n      \n      formData.variations.forEach((variation, index) => {\n        if (variation.image) {\n          productFormData.append('images', variation.image, `product-${index}-${Date.now()}.jpg`);\n        }\n      });\n  \n      const response = await api.post('/api/products', productFormData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n  \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\n      }\n  \n      const productData = await response.json();\n  \n      await Promise.all(formData.variations.map(async (variation, index) => {\n        const vendorProductData = {\n          vendorId: auth.vendorId,\n          productId: productData._id,\n          name: formData.name,\n          category: formData.category,\n          brand: formData.brand,\n          description: formData.description,\n          amounts: formData.variations.map(v => v.amount),\n          variation: {\n            amount: variation.amount,\n            strain: variation.strain,\n            thcContent: variation.thcContent ? parseFloat(variation.thcContent) : undefined,\n            price: parseFloat(variation.price),\n            salePrice: variation.salePrice ? parseFloat(variation.salePrice) : undefined,\n            image: productData.images[index],\n            tags: variation.tags || [], // Include tags in the request\n          },\n          status: 'Active'\n        };\n  \n        const vendorProductResponse = await api.post('/api/vendor/inventory', vendorProductData);\n  \n        if (!vendorProductResponse.data) {\n          throw new Error(`Failed to create vendor product variation ${index + 1}`);\n        }\n      }));\n  \n      alert('Products added to inventory successfully!');\n      setIsCreateModalOpen(false);\n      resetForm();\n      \n      const event = new CustomEvent('inventoryUpdated');\n      window.dispatchEvent(event);\n      \n    } catch (error) {\n      console.error('Error creating products:', error);\n      alert(`An error occurred while creating the products: ${error.message}`);\n    }\n  };\n\n  const resetForm = () => {\n    setBrand('');\n    setCategory('');\n    setSelectedProduct(null);\n    setVariations([]);\n    setInvalidSalePrices([]);\n    setSearchAttempted(false);\n  };\n  \n  return (\n    <div className=\"container mt-4\">\n      <h3>Add Product to Menu</h3>\n      \n      {/* Category Selection */}\n      <div className=\"mb-3\">\n        <label className=\"form-label fw-semibold\">Category</label>\n        <select\n          className=\"form-select\"\n          value={category}\n          onChange={(e) => setCategory(e.target.value)}\n        >\n          <option value=\"\">Select Category</option>\n          <option value=\"Flower\">Flower</option>\n          <option value=\"Pre-roll\">Pre-roll</option>\n          <option value=\"Vape\">Vape</option>\n          <option value=\"Edible\">Edible</option>\n          <option value=\"Extract\">Concentrate</option>\n          <option value=\"Tincture\">Tincture</option>\n          <option value=\"Gear\">Gear</option>\n        </select>\n      </div>\n\n      {/* Brand Input - Only shown when category is selected */}\n      {category && (\n        <div className=\"mb-3\">\n          <label className=\"form-label fw-semibold\">Brand</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Enter brand name\"\n            value={brand}\n            onChange={(e) => setBrand(e.target.value)}\n          />\n        </div>\n      )}\n\n      {/* Products Section */}\n      {searchAttempted && (\n        <div className=\"mb-3\">\n          <label className=\"form-label fw-semibold\">Products from Master Catalog</label>\n          <div className=\"list-group mb-3\">\n            {products.length > 0 ? (\n              products.map((product) => (\n                <li\n                  key={product._id}\n                  className={`list-group-item ${selectedProduct?._id === product._id ? 'active' : ''}`}\n                  onClick={() => handleProductSelect(product)}\n                  style={{ cursor: 'pointer' }}\n                >\n                  <div className=\"d-flex align-items-center\">\n                    {product.images?.[0] && (\n                      <img\n                        src={product.images[0]}\n                        alt={product.name}\n                        className=\"me-3\"\n                        style={{ width: '40px', height: '40px', objectFit: 'cover' }}\n                      />\n                    )}\n                    <div>\n                      <strong>{product.brand}</strong> - {product.name}\n                      <br />\n                      <small className=\"text-muted\">\n                        Available amounts: {product.amount?.join(', ')}\n                      </small>\n                    </div>\n                  </div>\n                </li>\n              ))\n            ) : (\n              <div className=\"list-group-item text-center text-muted\">\n                No matching products found\n              </div>\n            )}\n            \n            <button\n              className=\"list-group-item list-group-item-action d-flex align-items-center justify-content-center text-primary\"\n              onClick={() => setIsCreateModalOpen(true)}\n            >\n              <Plus className=\"w-5 h-5 mr-2\" />\n              Create New Product\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Variations Section */}\n      {selectedProduct && (\n        <>\n          <h3>Variations</h3>\n          {variations.map((variation, index) => (\n            <div\n              key={index}\n              className=\"mb-8 p-4 bg-gray-50 rounded-lg\"\n            >\n              <div className=\"flex justify-between items-center mb-4\">\n                <h4 className=\"text-md font-medium\">Variation #{index + 1}</h4>\n                {index > 0 && (\n                  <button\n                    type=\"button\"\n                    onClick={() => handleRemoveVariation(index)}\n                    className=\"text-red-500 hover:text-red-700\"\n                  >\n                    <X className=\"h-5 w-5\" />\n                  </button>\n                )}\n              </div>\n\n              {/* Image Selection */}\n              <div className=\"mb-3\">\n                <label className=\"form-label fw-semibold\">Select Image</label>\n                <div className=\"d-flex overflow-auto\" style={{ maxWidth: '100%', gap: '10px' }}>\n                  {selectedProduct.images.map((image, imgIndex) => (\n                    <img\n                      key={imgIndex}\n                      src={image}\n                      alt={`Product Image ${imgIndex + 1}`}\n                      onClick={() => handleImageSelect(index, image)}\n                      className={`img-thumbnail ${variation.image === image ? 'border-primary' : ''}`}\n                      style={{\n                        cursor: 'pointer',\n                        width: '250px',\n                        height: '250px',\n                        objectFit: 'cover',\n                        borderWidth: variation.image === image ? '3px' : '1px',\n                      }}\n                    />\n                  ))}\n                </div>\n              </div>\n\n              {/* Amount Selection */}\n              {category !== 'Gear' && (\n                <div className=\"mb-3\">\n                  <label className=\"form-label fw-semibold\">Amount</label>\n                  <select\n                    className=\"form-select\"\n                    value={variation.amount}\n                    onChange={(e) => handleVariationChange(index,'amount', e.target.value)}\n                    >\n                      <option value=\"\" disabled>Select Amount</option>\n                      {selectedProduct?.amount?.map((option, i) => (\n                        <option key={i} value={option}>{option}</option>\n                      ))}\n                    </select>\n                  </div>\n                )}\n  \n                {/* Strain Input */}\n                <div className=\"mb-3 position-relative\">\n                  <label className=\"form-label fw-semibold\">Strain</label>\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    value={variation.strain}\n                    onChange={(e) => handleVariationChange(index, 'strain', e.target.value)}\n                    onFocus={() => {\n                      if (variation.strain.trim()) {\n                        setActiveDropdownIndex(index);\n                        setDropdownVisible(true);\n                      }\n                    }}\n                    onBlur={() => setTimeout(() => {\n                      setDropdownVisible(false);\n                      setActiveDropdownIndex(null);\n                    }, 100)}\n                  />\n                  {index === activeDropdownIndex && dropdownVisible && filteredStrains.length > 0 && (\n                    <ul className=\"dropdown-menu show position-absolute\" style={{ zIndex: 10 }}>\n                      {filteredStrains.map((strain, i) => (\n                        <li\n                          key={i}\n                          className=\"dropdown-item\"\n                          onMouseDown={() => handleSelectStrain(index, strain)}\n                        >\n                          {strain.name} ({strain.classification.substring(0, 3).toUpperCase()})\n                        </li>\n                      ))}\n                    </ul>\n                  )}\n                </div>\n  \n                {/* Price Fields */}\n                <div className=\"row\">\n                  <div className=\"col-md-6 mb-3\">\n                    <label className=\"form-label fw-semibold\">Price ($)</label>\n                    <input\n                      type=\"number\"\n                      className=\"form-control\"\n                      value={variation.price}\n                      onChange={(e) => handleVariationChange(index, 'price', e.target.value)}\n                    />\n                  </div>\n                  <div className=\"col-md-6 mb-3\">\n                    <label className=\"form-label fw-semibold\">Sale Price ($)</label>\n                    <input\n                      type=\"number\"\n                      className={`form-control ${invalidSalePrices.includes(index) ? 'is-invalid' : ''}`}\n                      placeholder='Optional'\n                      value={variation.salePrice}\n                      onChange={(e) => handleVariationChange(index, 'salePrice', e.target.value)}\n                    />\n                    {invalidSalePrices.includes(index) && (\n                      <div className=\"invalid-feedback\">\n                        Sale price must be less than regular price\n                      </div>\n                    )}\n                  </div>\n                </div>\n  \n                {/* THC Content */}\n                <div className=\"mb-3\">\n                  <label className=\"form-label fw-semibold\">THC Content (%)</label>\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    placeholder='Optional'\n                    value={variation.thcContent}\n                    onChange={(e) => handleVariationChange(\n                      index,\n                      'thcContent',\n                      e.target.value.replace(/[^0-9.]/g, '')\n                    )}\n                  />\n                </div>\n  \n                {/* Tags */}\n                <div className=\"mb-3\">\n                  <label className=\"form-label fw-semibold\">Tags</label>\n                  <div className=\"d-flex gap-4\">\n                    <div className=\"form-check\">\n                      <input\n                        type=\"checkbox\"\n                        className=\"form-check-input\"\n                        checked={variation.tags?.includes('Staff Pick') || false}\n                        onChange={() => handleTagToggle(index, 'Staff Pick')}\n                      />\n                      <label className=\"form-check-label\">Staff Pick</label>\n                    </div>\n                    <div className=\"form-check\">\n                      <input\n                        type=\"checkbox\"\n                        className=\"form-check-input\"\n                        checked={variation.tags?.includes('High THC') || false}\n                        onChange={() => handleTagToggle(index, 'High THC')}\n                      />\n                      <label className=\"form-check-label\">High THC</label>\n                    </div>\n                    <div className=\"form-check\">\n                      <input\n                        type=\"checkbox\"\n                        className=\"form-check-input\"\n                        checked={variation.tags?.includes('Low THC') || false}\n                        onChange={() => handleTagToggle(index, 'Low THC')}\n                      />\n                      <label className=\"form-check-label\">Low THC</label>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n  \n            {/* Add Variation & Submit Buttons */}\n            <div className=\"d-flex flex-column align-items-start gap-4\">\n              <button \n                className=\"btn btn-secondary shadow-sm\" \n                onClick={handleAddVariation}\n                style={{\n                  width: '150px',\n                  height: '150px',\n                  backgroundColor: '#DBDBDB',\n                  color: '#333333',\n                  fontSize: '1.2rem',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  border: '1px',\n                  borderRadius: '8px',\n                  boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n                  transition: 'transform 0.2s',\n                }}\n                onMouseOver={(e) => e.currentTarget.style.transform = 'translateY(-2px)'}\n                onMouseOut={(e) => e.currentTarget.style.transform = 'translateY(0)'}\n              >\n                <Plus className=\"w-5 h-5 mr-2\" />\n                Add Variation\n              </button>\n  \n              <button \n                className=\"btn btn-primary rounded-pill shadow-sm w-100 mb-5\" \n                onClick={handleAddToInventory}\n                style={{\n                  backgroundColor: '#0056b3',\n                  padding: '15px 30px',\n                  fontSize: '1.2rem',\n                  border: 'none',\n                  boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n                  transition: 'transform 0.2s',\n                }}\n                onMouseOver={(e) => e.currentTarget.style.transform = 'translateY(-2px)'}\n                onMouseOut={(e) => e.currentTarget.style.transform = 'translateY(0)'}\n              >\n                Add to Menu\n              </button>\n            </div>\n          </>\n        )}\n  \n        {/* Create Product Modal */}\n        <CreateProductModal\n          show={isCreateModalOpen}\n          onClose={() => setIsCreateModalOpen(false)}\n          onSubmit={handleCreateProduct}\n        />\n  \n        {/* Bottom Spacing */}\n        <div style={{height: '300px'}}></div>\n      </div>\n    );\n  };\n  \n  export default AddProductPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}