{"ast":null,"code":"var _jsxFileName = \"/Users/home/Desktop/weedhurry-platform/v1/frontend/src/components/NearbyPickupPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport VendorCard from './VendorCard';\nimport PickupMap from './PickupMap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NearbyPickupPage = ({\n  searchQuery\n}) => {\n  _s();\n  const [vendors, setVendors] = useState([]);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [isDragging, setIsDragging] = useState(false);\n  const [startY, setStartY] = useState(0);\n  const [currentY, setCurrentY] = useState(0);\n  const vendorCardsRef = useRef(null);\n  const dragStartRef = useRef(0);\n  const BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:5001/api';\n\n  // Existing calculateDistance and fetchVendors functions remain the same...\n\n  const handleMouseDown = e => {\n    setIsDragging(true);\n    setStartY(e.clientY);\n    dragStartRef.current = e.clientY;\n    document.body.style.cursor = 'grabbing';\n  };\n  const handleMouseMove = e => {\n    if (!isDragging) return;\n    const deltaY = dragStartRef.current - e.clientY;\n    const containerHeight = window.innerHeight;\n    const maxDrag = containerHeight * 0.7; // Maximum drag is 70% of screen height\n\n    // Calculate new position with bounds\n    const newY = Math.max(0, Math.min(maxDrag, deltaY));\n    setCurrentY(newY);\n\n    // Update container position smoothly\n    if (vendorCardsRef.current) {\n      vendorCardsRef.current.style.transform = `translateY(-${newY}px)`;\n    }\n  };\n  const handleMouseUp = () => {\n    setIsDragging(false);\n    document.body.style.cursor = 'default';\n\n    // Determine if we should snap to expanded or collapsed state\n    const threshold = window.innerHeight * 0.3; // 30% threshold for expansion\n    const shouldExpand = currentY > threshold;\n    setIsExpanded(shouldExpand);\n\n    // Animate to final position\n    if (vendorCardsRef.current) {\n      vendorCardsRef.current.style.transition = 'transform 0.3s ease-out';\n      vendorCardsRef.current.style.transform = shouldExpand ? 'translateY(-70vh)' : 'translateY(0)';\n\n      // Reset transition after animation\n      setTimeout(() => {\n        vendorCardsRef.current.style.transition = '';\n      }, 300);\n    }\n  };\n\n  // Add event listeners for mouse events\n  useEffect(() => {\n    if (isDragging) {\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('mouseup', handleMouseUp);\n    }\n    return () => {\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [isDragging]);\n\n  // Filter vendors based on search query (existing code)...\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid p-0 pickup-page-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `map-container ${isExpanded ? 'expanded' : ''}`,\n      children: /*#__PURE__*/_jsxDEV(PickupMap, {\n        dispensaries: vendors.map(vendor => ({\n          ...vendor,\n          location: vendor.coordinates\n        })),\n        onMarkerClick: handleMarkerClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `vendor-card-container ${isExpanded ? 'expanded' : ''} ${isDragging ? 'dragging' : ''}`,\n      ref: vendorCardsRef,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drag-handle\",\n        onMouseDown: handleMouseDown\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), filteredVendors.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vendor-cards-wrapper\",\n        children: filteredVendors.map(vendor => /*#__PURE__*/_jsxDEV(VendorCard, {\n          vendor: vendor\n        }, vendor._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-muted my-4\",\n        children: \"No products match your search query.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        .pickup-page-container {\n          height: 100vh;\n          overflow: hidden;\n          position: relative;\n        }\n\n        .map-container {\n          height: 100%;\n          transition: height 0.3s ease-out;\n        }\n\n        .map-container.expanded {\n          height: 30vh;\n        }\n\n        .vendor-card-container {\n          position: absolute;\n          bottom: 0;\n          left: 0;\n          right: 0;\n          background: white;\n          border-radius: 16px 16px 0 0;\n          height: 70vh;\n          transform: translateY(0);\n          touch-action: none;\n          user-select: none;\n        }\n\n        .vendor-card-container.dragging {\n          transition: none;\n          cursor: grabbing;\n        }\n\n        .drag-handle {\n          width: 100%;\n          height: 24px;\n          background: transparent;\n          position: relative;\n          cursor: grab;\n          border-radius: 16px 16px 0 0;\n        }\n\n        .drag-handle::before {\n          content: '';\n          position: absolute;\n          top: 8px;\n          left: 50%;\n          transform: translateX(-50%);\n          width: 40px;\n          height: 4px;\n          background: #CBD5E0;\n          border-radius: 2px;\n        }\n\n        .vendor-cards-wrapper {\n          height: calc(100% - 24px);\n          overflow-y: auto;\n          padding: 16px;\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n};\n_s(NearbyPickupPage, \"zDb6T3ntm8yr6bO/+eH37MvLioo=\");\n_c = NearbyPickupPage;\nexport default NearbyPickupPage;\nvar _c;\n$RefreshReg$(_c, \"NearbyPickupPage\");","map":{"version":3,"names":["React","useEffect","useState","useRef","VendorCard","PickupMap","jsxDEV","_jsxDEV","NearbyPickupPage","searchQuery","_s","vendors","setVendors","error","setError","loading","setLoading","isExpanded","setIsExpanded","isDragging","setIsDragging","startY","setStartY","currentY","setCurrentY","vendorCardsRef","dragStartRef","BASE_URL","process","env","REACT_APP_API_BASE_URL","handleMouseDown","e","clientY","current","document","body","style","cursor","handleMouseMove","deltaY","containerHeight","window","innerHeight","maxDrag","newY","Math","max","min","transform","handleMouseUp","threshold","shouldExpand","transition","setTimeout","addEventListener","removeEventListener","className","children","dispensaries","map","vendor","location","coordinates","onMarkerClick","handleMarkerClick","fileName","_jsxFileName","lineNumber","columnNumber","ref","onMouseDown","filteredVendors","length","_id","jsx","_c","$RefreshReg$"],"sources":["/Users/home/Desktop/weedhurry-platform/v1/frontend/src/components/NearbyPickupPage.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport VendorCard from './VendorCard';\nimport PickupMap from './PickupMap';\n\nconst NearbyPickupPage = ({ searchQuery }) => {\n  const [vendors, setVendors] = useState([]);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [isDragging, setIsDragging] = useState(false);\n  const [startY, setStartY] = useState(0);\n  const [currentY, setCurrentY] = useState(0);\n  \n  const vendorCardsRef = useRef(null);\n  const dragStartRef = useRef(0);\n  const BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:5001/api';\n\n  // Existing calculateDistance and fetchVendors functions remain the same...\n\n  const handleMouseDown = (e) => {\n    setIsDragging(true);\n    setStartY(e.clientY);\n    dragStartRef.current = e.clientY;\n    document.body.style.cursor = 'grabbing';\n  };\n\n  const handleMouseMove = (e) => {\n    if (!isDragging) return;\n    \n    const deltaY = dragStartRef.current - e.clientY;\n    const containerHeight = window.innerHeight;\n    const maxDrag = containerHeight * 0.7; // Maximum drag is 70% of screen height\n    \n    // Calculate new position with bounds\n    const newY = Math.max(0, Math.min(maxDrag, deltaY));\n    setCurrentY(newY);\n    \n    // Update container position smoothly\n    if (vendorCardsRef.current) {\n      vendorCardsRef.current.style.transform = `translateY(-${newY}px)`;\n    }\n  };\n\n  const handleMouseUp = () => {\n    setIsDragging(false);\n    document.body.style.cursor = 'default';\n    \n    // Determine if we should snap to expanded or collapsed state\n    const threshold = window.innerHeight * 0.3; // 30% threshold for expansion\n    const shouldExpand = currentY > threshold;\n    \n    setIsExpanded(shouldExpand);\n    \n    // Animate to final position\n    if (vendorCardsRef.current) {\n      vendorCardsRef.current.style.transition = 'transform 0.3s ease-out';\n      vendorCardsRef.current.style.transform = shouldExpand \n        ? 'translateY(-70vh)' \n        : 'translateY(0)';\n      \n      // Reset transition after animation\n      setTimeout(() => {\n        vendorCardsRef.current.style.transition = '';\n      }, 300);\n    }\n  };\n\n  // Add event listeners for mouse events\n  useEffect(() => {\n    if (isDragging) {\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('mouseup', handleMouseUp);\n    }\n    \n    return () => {\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [isDragging]);\n\n  // Filter vendors based on search query (existing code)...\n\n  return (\n    <div className=\"container-fluid p-0 pickup-page-container\">\n      <div className={`map-container ${isExpanded ? 'expanded' : ''}`}>\n        <PickupMap\n          dispensaries={vendors.map((vendor) => ({\n            ...vendor,\n            location: vendor.coordinates,\n          }))}\n          onMarkerClick={handleMarkerClick}\n        />\n      </div>\n\n      <div\n        className={`vendor-card-container ${isExpanded ? 'expanded' : ''} ${isDragging ? 'dragging' : ''}`}\n        ref={vendorCardsRef}\n      >\n        <div\n          className=\"drag-handle\"\n          onMouseDown={handleMouseDown}\n        />\n        \n        {filteredVendors.length > 0 ? (\n          <div className=\"vendor-cards-wrapper\">\n            {filteredVendors.map((vendor) => (\n              <VendorCard key={vendor._id} vendor={vendor} />\n            ))}\n          </div>\n        ) : (\n          <p className=\"text-center text-muted my-4\">No products match your search query.</p>\n        )}\n      </div>\n\n      <style jsx>{`\n        .pickup-page-container {\n          height: 100vh;\n          overflow: hidden;\n          position: relative;\n        }\n\n        .map-container {\n          height: 100%;\n          transition: height 0.3s ease-out;\n        }\n\n        .map-container.expanded {\n          height: 30vh;\n        }\n\n        .vendor-card-container {\n          position: absolute;\n          bottom: 0;\n          left: 0;\n          right: 0;\n          background: white;\n          border-radius: 16px 16px 0 0;\n          height: 70vh;\n          transform: translateY(0);\n          touch-action: none;\n          user-select: none;\n        }\n\n        .vendor-card-container.dragging {\n          transition: none;\n          cursor: grabbing;\n        }\n\n        .drag-handle {\n          width: 100%;\n          height: 24px;\n          background: transparent;\n          position: relative;\n          cursor: grab;\n          border-radius: 16px 16px 0 0;\n        }\n\n        .drag-handle::before {\n          content: '';\n          position: absolute;\n          top: 8px;\n          left: 50%;\n          transform: translateX(-50%);\n          width: 40px;\n          height: 4px;\n          background: #CBD5E0;\n          border-radius: 2px;\n        }\n\n        .vendor-cards-wrapper {\n          height: calc(100% - 24px);\n          overflow-y: auto;\n          padding: 16px;\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default NearbyPickupPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}