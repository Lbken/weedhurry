{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{GoogleMap,Marker}from'@react-google-maps/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const containerStyle={width:'100%',height:'400px'};const defaultCenter={lat:34.0522,lng:-118.2437};// Los Angeles\nconst mapOptions={zoomControl:true,streetViewControl:false,mapTypeControl:true,fullscreenControl:false,// Improve map performance\ngestureHandling:'cooperative',disableDoubleClickZoom:true,// Custom style for better visibility\nstyles:[{featureType:'poi',elementType:'labels',stylers:[{visibility:'off'}]}]};function MapComponent(_ref){var _window$google;let{onLocationChange,initialLocation}=_ref;const[map,setMap]=useState(null);const[marker,setMarker]=useState(null);const[location,setLocation]=useState(initialLocation||null);const[isMapLoaded,setIsMapLoaded]=useState(false);// Handle initial location updates\nuseEffect(()=>{if(initialLocation&&map&&isMapLoaded){setLocation(initialLocation);map.panTo(initialLocation);}},[initialLocation,map,isMapLoaded]);// Map load handler\nconst handleMapLoad=useCallback(mapInstance=>{setMap(mapInstance);setIsMapLoaded(true);},[]);// Map unmount handler\nconst handleMapUnmount=useCallback(()=>{setMap(null);setIsMapLoaded(false);},[]);// Marker load handler\nconst handleMarkerLoad=useCallback(markerInstance=>{setMarker(markerInstance);},[]);// Map click handler\nconst handleMapClick=useCallback(event=>{const newLocation={lat:event.latLng.lat(),lng:event.latLng.lng()};setLocation(newLocation);if(marker){marker.setPosition(newLocation);}if(map){map.panTo(newLocation);}onLocationChange(newLocation);},[marker,map,onLocationChange]);// Marker drag end handler\nconst handleMarkerDragEnd=useCallback(event=>{const newLocation={lat:event.latLng.lat(),lng:event.latLng.lng()};setLocation(newLocation);if(map){map.panTo(newLocation);}onLocationChange(newLocation);},[map,onLocationChange]);return/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full h-full\",children:[/*#__PURE__*/_jsx(GoogleMap,{mapContainerStyle:containerStyle,center:location||defaultCenter,zoom:12,onClick:handleMapClick,onLoad:handleMapLoad,onUnmount:handleMapUnmount,options:mapOptions,children:location&&/*#__PURE__*/_jsx(Marker,{position:location,draggable:true,onLoad:handleMarkerLoad,onDragEnd:handleMarkerDragEnd,animation:(_window$google=window.google)===null||_window$google===void 0?void 0:_window$google.maps.Animation.DROP})}),!isMapLoaded&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center bg-gray-100 bg-opacity-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:\"Loading map...\"})})]});}export default/*#__PURE__*/React.memo(MapComponent);","map":{"version":3,"names":["React","useState","useEffect","useCallback","GoogleMap","Marker","jsx","_jsx","jsxs","_jsxs","containerStyle","width","height","defaultCenter","lat","lng","mapOptions","zoomControl","streetViewControl","mapTypeControl","fullscreenControl","gestureHandling","disableDoubleClickZoom","styles","featureType","elementType","stylers","visibility","MapComponent","_ref","_window$google","onLocationChange","initialLocation","map","setMap","marker","setMarker","location","setLocation","isMapLoaded","setIsMapLoaded","panTo","handleMapLoad","mapInstance","handleMapUnmount","handleMarkerLoad","markerInstance","handleMapClick","event","newLocation","latLng","setPosition","handleMarkerDragEnd","className","children","mapContainerStyle","center","zoom","onClick","onLoad","onUnmount","options","position","draggable","onDragEnd","animation","window","google","maps","Animation","DROP","memo"],"sources":["/Users/home/Desktop/weedhurry-platform/v1/frontend/src/components/MapComponent.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { GoogleMap, Marker } from '@react-google-maps/api';\n\nconst containerStyle = {\n  width: '100%',\n  height: '400px',\n};\n\nconst defaultCenter = { lat: 34.0522, lng: -118.2437 }; // Los Angeles\n\nconst mapOptions = {\n  zoomControl: true,\n  streetViewControl: false,\n  mapTypeControl: true,\n  fullscreenControl: false,\n  // Improve map performance\n  gestureHandling: 'cooperative',\n  disableDoubleClickZoom: true,\n  // Custom style for better visibility\n  styles: [\n    {\n      featureType: 'poi',\n      elementType: 'labels',\n      stylers: [{ visibility: 'off' }]\n    }\n  ]\n};\n\nfunction MapComponent({ onLocationChange, initialLocation }) {\n  const [map, setMap] = useState(null);\n  const [marker, setMarker] = useState(null);\n  const [location, setLocation] = useState(initialLocation || null);\n  const [isMapLoaded, setIsMapLoaded] = useState(false);\n\n  // Handle initial location updates\n  useEffect(() => {\n    if (initialLocation && map && isMapLoaded) {\n      setLocation(initialLocation);\n      map.panTo(initialLocation);\n    }\n  }, [initialLocation, map, isMapLoaded]);\n\n  // Map load handler\n  const handleMapLoad = useCallback((mapInstance) => {\n    setMap(mapInstance);\n    setIsMapLoaded(true);\n  }, []);\n\n  // Map unmount handler\n  const handleMapUnmount = useCallback(() => {\n    setMap(null);\n    setIsMapLoaded(false);\n  }, []);\n\n  // Marker load handler\n  const handleMarkerLoad = useCallback((markerInstance) => {\n    setMarker(markerInstance);\n  }, []);\n\n  // Map click handler\n  const handleMapClick = useCallback((event) => {\n    const newLocation = {\n      lat: event.latLng.lat(),\n      lng: event.latLng.lng(),\n    };\n    \n    setLocation(newLocation);\n    \n    if (marker) {\n      marker.setPosition(newLocation);\n    }\n    \n    if (map) {\n      map.panTo(newLocation);\n    }\n    \n    onLocationChange(newLocation);\n  }, [marker, map, onLocationChange]);\n\n  // Marker drag end handler\n  const handleMarkerDragEnd = useCallback((event) => {\n    const newLocation = {\n      lat: event.latLng.lat(),\n      lng: event.latLng.lng(),\n    };\n    \n    setLocation(newLocation);\n    \n    if (map) {\n      map.panTo(newLocation);\n    }\n    \n    onLocationChange(newLocation);\n  }, [map, onLocationChange]);\n\n  return (\n    <div className=\"relative w-full h-full\">\n      <GoogleMap\n        mapContainerStyle={containerStyle}\n        center={location || defaultCenter}\n        zoom={12}\n        onClick={handleMapClick}\n        onLoad={handleMapLoad}\n        onUnmount={handleMapUnmount}\n        options={mapOptions}\n      >\n        {location && (\n          <Marker\n            position={location}\n            draggable={true}\n            onLoad={handleMarkerLoad}\n            onDragEnd={handleMarkerDragEnd}\n            animation={window.google?.maps.Animation.DROP}\n          />\n        )}\n      </GoogleMap>\n      {!isMapLoaded && (\n        <div className=\"absolute inset-0 flex items-center justify-center bg-gray-100 bg-opacity-50\">\n          <div className=\"text-gray-600\">Loading map...</div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default React.memo(MapComponent);"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,SAAS,CAAEC,MAAM,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3D,KAAM,CAAAC,cAAc,CAAG,CACrBC,KAAK,CAAE,MAAM,CACbC,MAAM,CAAE,OACV,CAAC,CAED,KAAM,CAAAC,aAAa,CAAG,CAAEC,GAAG,CAAE,OAAO,CAAEC,GAAG,CAAE,CAAC,QAAS,CAAC,CAAE;AAExD,KAAM,CAAAC,UAAU,CAAG,CACjBC,WAAW,CAAE,IAAI,CACjBC,iBAAiB,CAAE,KAAK,CACxBC,cAAc,CAAE,IAAI,CACpBC,iBAAiB,CAAE,KAAK,CACxB;AACAC,eAAe,CAAE,aAAa,CAC9BC,sBAAsB,CAAE,IAAI,CAC5B;AACAC,MAAM,CAAE,CACN,CACEC,WAAW,CAAE,KAAK,CAClBC,WAAW,CAAE,QAAQ,CACrBC,OAAO,CAAE,CAAC,CAAEC,UAAU,CAAE,KAAM,CAAC,CACjC,CAAC,CAEL,CAAC,CAED,QAAS,CAAAC,YAAYA,CAAAC,IAAA,CAAwC,KAAAC,cAAA,IAAvC,CAAEC,gBAAgB,CAAEC,eAAgB,CAAC,CAAAH,IAAA,CACzD,KAAM,CAACI,GAAG,CAAEC,MAAM,CAAC,CAAGjC,QAAQ,CAAC,IAAI,CAAC,CACpC,KAAM,CAACkC,MAAM,CAAEC,SAAS,CAAC,CAAGnC,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAACoC,QAAQ,CAAEC,WAAW,CAAC,CAAGrC,QAAQ,CAAC+B,eAAe,EAAI,IAAI,CAAC,CACjE,KAAM,CAACO,WAAW,CAAEC,cAAc,CAAC,CAAGvC,QAAQ,CAAC,KAAK,CAAC,CAErD;AACAC,SAAS,CAAC,IAAM,CACd,GAAI8B,eAAe,EAAIC,GAAG,EAAIM,WAAW,CAAE,CACzCD,WAAW,CAACN,eAAe,CAAC,CAC5BC,GAAG,CAACQ,KAAK,CAACT,eAAe,CAAC,CAC5B,CACF,CAAC,CAAE,CAACA,eAAe,CAAEC,GAAG,CAAEM,WAAW,CAAC,CAAC,CAEvC;AACA,KAAM,CAAAG,aAAa,CAAGvC,WAAW,CAAEwC,WAAW,EAAK,CACjDT,MAAM,CAACS,WAAW,CAAC,CACnBH,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAI,gBAAgB,CAAGzC,WAAW,CAAC,IAAM,CACzC+B,MAAM,CAAC,IAAI,CAAC,CACZM,cAAc,CAAC,KAAK,CAAC,CACvB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAK,gBAAgB,CAAG1C,WAAW,CAAE2C,cAAc,EAAK,CACvDV,SAAS,CAACU,cAAc,CAAC,CAC3B,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAC,cAAc,CAAG5C,WAAW,CAAE6C,KAAK,EAAK,CAC5C,KAAM,CAAAC,WAAW,CAAG,CAClBnC,GAAG,CAAEkC,KAAK,CAACE,MAAM,CAACpC,GAAG,CAAC,CAAC,CACvBC,GAAG,CAAEiC,KAAK,CAACE,MAAM,CAACnC,GAAG,CAAC,CACxB,CAAC,CAEDuB,WAAW,CAACW,WAAW,CAAC,CAExB,GAAId,MAAM,CAAE,CACVA,MAAM,CAACgB,WAAW,CAACF,WAAW,CAAC,CACjC,CAEA,GAAIhB,GAAG,CAAE,CACPA,GAAG,CAACQ,KAAK,CAACQ,WAAW,CAAC,CACxB,CAEAlB,gBAAgB,CAACkB,WAAW,CAAC,CAC/B,CAAC,CAAE,CAACd,MAAM,CAAEF,GAAG,CAAEF,gBAAgB,CAAC,CAAC,CAEnC;AACA,KAAM,CAAAqB,mBAAmB,CAAGjD,WAAW,CAAE6C,KAAK,EAAK,CACjD,KAAM,CAAAC,WAAW,CAAG,CAClBnC,GAAG,CAAEkC,KAAK,CAACE,MAAM,CAACpC,GAAG,CAAC,CAAC,CACvBC,GAAG,CAAEiC,KAAK,CAACE,MAAM,CAACnC,GAAG,CAAC,CACxB,CAAC,CAEDuB,WAAW,CAACW,WAAW,CAAC,CAExB,GAAIhB,GAAG,CAAE,CACPA,GAAG,CAACQ,KAAK,CAACQ,WAAW,CAAC,CACxB,CAEAlB,gBAAgB,CAACkB,WAAW,CAAC,CAC/B,CAAC,CAAE,CAAChB,GAAG,CAAEF,gBAAgB,CAAC,CAAC,CAE3B,mBACEtB,KAAA,QAAK4C,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrC/C,IAAA,CAACH,SAAS,EACRmD,iBAAiB,CAAE7C,cAAe,CAClC8C,MAAM,CAAEnB,QAAQ,EAAIxB,aAAc,CAClC4C,IAAI,CAAE,EAAG,CACTC,OAAO,CAAEX,cAAe,CACxBY,MAAM,CAAEjB,aAAc,CACtBkB,SAAS,CAAEhB,gBAAiB,CAC5BiB,OAAO,CAAE7C,UAAW,CAAAsC,QAAA,CAEnBjB,QAAQ,eACP9B,IAAA,CAACF,MAAM,EACLyD,QAAQ,CAAEzB,QAAS,CACnB0B,SAAS,CAAE,IAAK,CAChBJ,MAAM,CAAEd,gBAAiB,CACzBmB,SAAS,CAAEZ,mBAAoB,CAC/Ba,SAAS,EAAAnC,cAAA,CAAEoC,MAAM,CAACC,MAAM,UAAArC,cAAA,iBAAbA,cAAA,CAAesC,IAAI,CAACC,SAAS,CAACC,IAAK,CAC/C,CACF,CACQ,CAAC,CACX,CAAC/B,WAAW,eACXhC,IAAA,QAAK8C,SAAS,CAAC,6EAA6E,CAAAC,QAAA,cAC1F/C,IAAA,QAAK8C,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,gBAAc,CAAK,CAAC,CAChD,CACN,EACE,CAAC,CAEV,CAEA,2BAAetD,KAAK,CAACuE,IAAI,CAAC3C,YAAY,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}