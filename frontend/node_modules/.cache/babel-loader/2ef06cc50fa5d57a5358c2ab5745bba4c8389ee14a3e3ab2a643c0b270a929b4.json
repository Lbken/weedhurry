{"ast":null,"code":"import React,{useContext,useState,useEffect}from'react';import{useParams,useLocation}from'react-router-dom';import{VendorProvider,VendorContext}from'../context/VendorContext';import VendorDetails from'../components/VendorDetails';import MenuDisplay from'../components/MenuDisplay';import CategoryFilter from'../components/CategoryFilter';import Footer from'../components/Footer';import'./VendorMenuPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VendorMenuPage=()=>{const{vendorId}=useParams();return/*#__PURE__*/_jsx(VendorProvider,{vendorId:vendorId,children:/*#__PURE__*/_jsx(VendorMenuContent,{})});};const VendorMenuContent=()=>{const{vendor,products,loading,error}=useContext(VendorContext);const{state}=useLocation();const[filteredProducts,setFilteredProducts]=useState([]);const[selectedCategory,setSelectedCategory]=useState('All');const[searchTerm,setSearchTerm]=useState('');const[activeFilters,setActiveFilters]=useState({sativa:false,hybrid:false,indica:false});const[orderType,setOrderType]=useState((state===null||state===void 0?void 0:state.initialOrderType)||'Delivery');const[animate,setAnimate]=useState(false);// Combined filtering with preserved product properties\nuseEffect(()=>{if(!(products!==null&&products!==void 0&&products.length))return;let updatedProducts=products.map(product=>({...product,// Preserve all original properties including tags\n// Only override fields that need normalization\ndescription:product.description,strain:product.strain||'N/A',thcContent:product.thcContent||null,price:product.price||0,salePrice:product.salePrice||null,image:product.image||\"/placeholder-image.png\",amount:product.amount||'N/A',status:product.status,vendorId:vendor===null||vendor===void 0?void 0:vendor._id}));console.log('Normalized products:',updatedProducts);// Apply category filter\nif(selectedCategory!=='All'){updatedProducts=updatedProducts.filter(product=>product.category===selectedCategory);}// Apply strain classification filters\nconst activeClassifications=Object.entries(activeFilters).filter(_ref=>{let[_,isActive]=_ref;return isActive;}).map(_ref2=>{let[classification]=_ref2;return classification.toLowerCase();});if(activeClassifications.length>0){updatedProducts=updatedProducts.filter(product=>{const strain=(product.strain||'').toLowerCase();return activeClassifications.some(filter=>{if(filter==='sativa')return strain.includes('sat');if(filter==='hybrid')return strain.includes('hyb');if(filter==='indica')return strain.includes('ind');return false;});});}// Apply search filter\nif(searchTerm.trim()){updatedProducts=updatedProducts.filter(product=>[product.name,product.brand,product.strain].filter(Boolean).some(field=>field.toLowerCase().includes(searchTerm.trim().toLowerCase())));}console.log('Final filtered products:',updatedProducts);setFilteredProducts(updatedProducts);},[products,selectedCategory,activeFilters,searchTerm,vendor===null||vendor===void 0?void 0:vendor._id]);// Animation effect\nuseEffect(()=>{setAnimate(true);},[]);const handleCategoryChange=category=>setSelectedCategory(category);const handleSearch=term=>setSearchTerm(term);const handleFilter=filters=>setActiveFilters(filters);if(error)return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:`vendor-menu-page ${animate?'slide-in':''}`,style:{backgroundColor:'#F8F9FA',minHeight:'100vh',padding:'0px',margin:'0',display:'flex',flexDirection:'column',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shared-card\",children:[/*#__PURE__*/_jsx(VendorDetails,{vendor:vendor,orderType:orderType,setOrderType:setOrderType}),/*#__PURE__*/_jsx(\"div\",{className:\"category-filter\",children:/*#__PURE__*/_jsx(CategoryFilter,{selectedCategory:selectedCategory,onCategoryChange:handleCategoryChange,onSearch:handleSearch,onFilter:handleFilter})}),/*#__PURE__*/_jsx(MenuDisplay,{products:filteredProducts,vendorName:vendor===null||vendor===void 0?void 0:vendor.dispensaryName,logoUrl:vendor===null||vendor===void 0?void 0:vendor.logoUrl,vendorId:vendor===null||vendor===void 0?void 0:vendor._id,orderType:orderType})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default VendorMenuPage;","map":{"version":3,"names":["React","useContext","useState","useEffect","useParams","useLocation","VendorProvider","VendorContext","VendorDetails","MenuDisplay","CategoryFilter","Footer","jsx","_jsx","jsxs","_jsxs","VendorMenuPage","vendorId","children","VendorMenuContent","vendor","products","loading","error","state","filteredProducts","setFilteredProducts","selectedCategory","setSelectedCategory","searchTerm","setSearchTerm","activeFilters","setActiveFilters","sativa","hybrid","indica","orderType","setOrderType","initialOrderType","animate","setAnimate","length","updatedProducts","map","product","description","strain","thcContent","price","salePrice","image","amount","status","_id","console","log","filter","category","activeClassifications","Object","entries","_ref","_","isActive","_ref2","classification","toLowerCase","some","includes","trim","name","brand","Boolean","field","handleCategoryChange","handleSearch","term","handleFilter","filters","className","style","backgroundColor","minHeight","padding","margin","display","flexDirection","justifyContent","alignItems","onCategoryChange","onSearch","onFilter","vendorName","dispensaryName","logoUrl"],"sources":["/Users/home/Desktop/weedhurry-platform/v1/frontend/src/pages/VendorMenuPage.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport { useParams, useLocation } from 'react-router-dom';\nimport { VendorProvider, VendorContext } from '../context/VendorContext';\nimport VendorDetails from '../components/VendorDetails';\nimport MenuDisplay from '../components/MenuDisplay';\nimport CategoryFilter from '../components/CategoryFilter';\nimport Footer from '../components/Footer';\nimport './VendorMenuPage.css';\n\nconst VendorMenuPage = () => {\n  const { vendorId } = useParams();\n  return (\n    <VendorProvider vendorId={vendorId}>\n      <VendorMenuContent />\n    </VendorProvider>\n  );\n};\n\nconst VendorMenuContent = () => {\n  const { vendor, products, loading, error } = useContext(VendorContext);\n  const { state } = useLocation();\n  const [filteredProducts, setFilteredProducts] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState('All');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [activeFilters, setActiveFilters] = useState({\n    sativa: false,\n    hybrid: false,\n    indica: false,\n  });\n  const [orderType, setOrderType] = useState(state?.initialOrderType || 'Delivery');\n  const [animate, setAnimate] = useState(false);\n\n  // Combined filtering with preserved product properties\n  useEffect(() => {\n    if (!products?.length) return;\n\n    let updatedProducts = products.map(product => ({\n      ...product, // Preserve all original properties including tags\n      // Only override fields that need normalization\n      description: product.description,\n      strain: product.strain || 'N/A',\n      thcContent: product.thcContent || null,\n      price: product.price || 0,\n      salePrice: product.salePrice || null,\n      image: product.image || \"/placeholder-image.png\",\n      amount: product.amount || 'N/A',\n      status: product.status,\n      vendorId: vendor?._id,\n    }));\n\n    console.log('Normalized products:', updatedProducts);\n\n    // Apply category filter\n    if (selectedCategory !== 'All') {\n      updatedProducts = updatedProducts.filter(\n        (product) => product.category === selectedCategory\n      );\n    }\n\n    // Apply strain classification filters\n    const activeClassifications = Object.entries(activeFilters)\n      .filter(([_, isActive]) => isActive)\n      .map(([classification]) => classification.toLowerCase());\n\n    if (activeClassifications.length > 0) {\n      updatedProducts = updatedProducts.filter((product) => {\n        const strain = (product.strain || '').toLowerCase();\n        return activeClassifications.some((filter) => {\n          if (filter === 'sativa') return strain.includes('sat');\n          if (filter === 'hybrid') return strain.includes('hyb');\n          if (filter === 'indica') return strain.includes('ind');\n          return false;\n        });\n      });\n    }\n\n    // Apply search filter\n    if (searchTerm.trim()) {\n      updatedProducts = updatedProducts.filter((product) =>\n        [product.name, product.brand, product.strain]\n          .filter(Boolean)\n          .some((field) =>\n            field.toLowerCase().includes(searchTerm.trim().toLowerCase())\n          )\n      );\n    }\n\n    console.log('Final filtered products:', updatedProducts);\n    setFilteredProducts(updatedProducts);\n    \n  }, [products, selectedCategory, activeFilters, searchTerm, vendor?._id]);\n\n  // Animation effect\n  useEffect(() => {\n    setAnimate(true);\n  }, []);\n\n  const handleCategoryChange = (category) => setSelectedCategory(category);\n  const handleSearch = (term) => setSearchTerm(term);\n  const handleFilter = (filters) => setActiveFilters(filters);\n\n  if (error) return <div>Error: {error}</div>;\n  if (loading) return <div>Loading...</div>;\n\n  return (\n    <div\n      className={`vendor-menu-page ${animate ? 'slide-in' : ''}`}\n      style={{\n        backgroundColor: '#F8F9FA',\n        minHeight: '100vh',\n        padding: '0px',\n        margin: '0',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n      }}\n    >\n      <div className=\"shared-card\">\n        <VendorDetails \n          vendor={vendor} \n          orderType={orderType} \n          setOrderType={setOrderType} \n        />\n        \n        <div className='category-filter'>\n          <CategoryFilter\n            selectedCategory={selectedCategory}\n            onCategoryChange={handleCategoryChange}\n            onSearch={handleSearch}\n            onFilter={handleFilter}\n          />\n        </div>\n\n        <MenuDisplay\n          products={filteredProducts}\n          vendorName={vendor?.dispensaryName}\n          logoUrl={vendor?.logoUrl}\n          vendorId={vendor?._id}\n          orderType={orderType}\n        />\n      </div>\n      <Footer />\n    </div>\n  );\n};\n\nexport default VendorMenuPage;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC9D,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,OAASC,cAAc,CAAEC,aAAa,KAAQ,0BAA0B,CACxE,MAAO,CAAAC,aAAa,KAAM,6BAA6B,CACvD,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CACnD,MAAO,CAAAC,cAAc,KAAM,8BAA8B,CACzD,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,MAAO,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9B,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAEC,QAAS,CAAC,CAAGb,SAAS,CAAC,CAAC,CAChC,mBACES,IAAA,CAACP,cAAc,EAACW,QAAQ,CAAEA,QAAS,CAAAC,QAAA,cACjCL,IAAA,CAACM,iBAAiB,GAAE,CAAC,CACP,CAAC,CAErB,CAAC,CAED,KAAM,CAAAA,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,KAAM,CAAEC,MAAM,CAAEC,QAAQ,CAAEC,OAAO,CAAEC,KAAM,CAAC,CAAGtB,UAAU,CAACM,aAAa,CAAC,CACtE,KAAM,CAAEiB,KAAM,CAAC,CAAGnB,WAAW,CAAC,CAAC,CAC/B,KAAM,CAACoB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGxB,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAACyB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG1B,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAAC2B,UAAU,CAAEC,aAAa,CAAC,CAAG5B,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAAC6B,aAAa,CAAEC,gBAAgB,CAAC,CAAG9B,QAAQ,CAAC,CACjD+B,MAAM,CAAE,KAAK,CACbC,MAAM,CAAE,KAAK,CACbC,MAAM,CAAE,KACV,CAAC,CAAC,CACF,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGnC,QAAQ,CAAC,CAAAsB,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEc,gBAAgB,GAAI,UAAU,CAAC,CACjF,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGtC,QAAQ,CAAC,KAAK,CAAC,CAE7C;AACAC,SAAS,CAAC,IAAM,CACd,GAAI,EAACkB,QAAQ,SAARA,QAAQ,WAARA,QAAQ,CAAEoB,MAAM,EAAE,OAEvB,GAAI,CAAAC,eAAe,CAAGrB,QAAQ,CAACsB,GAAG,CAACC,OAAO,GAAK,CAC7C,GAAGA,OAAO,CAAE;AACZ;AACAC,WAAW,CAAED,OAAO,CAACC,WAAW,CAChCC,MAAM,CAAEF,OAAO,CAACE,MAAM,EAAI,KAAK,CAC/BC,UAAU,CAAEH,OAAO,CAACG,UAAU,EAAI,IAAI,CACtCC,KAAK,CAAEJ,OAAO,CAACI,KAAK,EAAI,CAAC,CACzBC,SAAS,CAAEL,OAAO,CAACK,SAAS,EAAI,IAAI,CACpCC,KAAK,CAAEN,OAAO,CAACM,KAAK,EAAI,wBAAwB,CAChDC,MAAM,CAAEP,OAAO,CAACO,MAAM,EAAI,KAAK,CAC/BC,MAAM,CAAER,OAAO,CAACQ,MAAM,CACtBnC,QAAQ,CAAEG,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEiC,GACpB,CAAC,CAAC,CAAC,CAEHC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEb,eAAe,CAAC,CAEpD;AACA,GAAIf,gBAAgB,GAAK,KAAK,CAAE,CAC9Be,eAAe,CAAGA,eAAe,CAACc,MAAM,CACrCZ,OAAO,EAAKA,OAAO,CAACa,QAAQ,GAAK9B,gBACpC,CAAC,CACH,CAEA;AACA,KAAM,CAAA+B,qBAAqB,CAAGC,MAAM,CAACC,OAAO,CAAC7B,aAAa,CAAC,CACxDyB,MAAM,CAACK,IAAA,MAAC,CAACC,CAAC,CAAEC,QAAQ,CAAC,CAAAF,IAAA,OAAK,CAAAE,QAAQ,GAAC,CACnCpB,GAAG,CAACqB,KAAA,MAAC,CAACC,cAAc,CAAC,CAAAD,KAAA,OAAK,CAAAC,cAAc,CAACC,WAAW,CAAC,CAAC,GAAC,CAE1D,GAAIR,qBAAqB,CAACjB,MAAM,CAAG,CAAC,CAAE,CACpCC,eAAe,CAAGA,eAAe,CAACc,MAAM,CAAEZ,OAAO,EAAK,CACpD,KAAM,CAAAE,MAAM,CAAG,CAACF,OAAO,CAACE,MAAM,EAAI,EAAE,EAAEoB,WAAW,CAAC,CAAC,CACnD,MAAO,CAAAR,qBAAqB,CAACS,IAAI,CAAEX,MAAM,EAAK,CAC5C,GAAIA,MAAM,GAAK,QAAQ,CAAE,MAAO,CAAAV,MAAM,CAACsB,QAAQ,CAAC,KAAK,CAAC,CACtD,GAAIZ,MAAM,GAAK,QAAQ,CAAE,MAAO,CAAAV,MAAM,CAACsB,QAAQ,CAAC,KAAK,CAAC,CACtD,GAAIZ,MAAM,GAAK,QAAQ,CAAE,MAAO,CAAAV,MAAM,CAACsB,QAAQ,CAAC,KAAK,CAAC,CACtD,MAAO,MAAK,CACd,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAEA;AACA,GAAIvC,UAAU,CAACwC,IAAI,CAAC,CAAC,CAAE,CACrB3B,eAAe,CAAGA,eAAe,CAACc,MAAM,CAAEZ,OAAO,EAC/C,CAACA,OAAO,CAAC0B,IAAI,CAAE1B,OAAO,CAAC2B,KAAK,CAAE3B,OAAO,CAACE,MAAM,CAAC,CAC1CU,MAAM,CAACgB,OAAO,CAAC,CACfL,IAAI,CAAEM,KAAK,EACVA,KAAK,CAACP,WAAW,CAAC,CAAC,CAACE,QAAQ,CAACvC,UAAU,CAACwC,IAAI,CAAC,CAAC,CAACH,WAAW,CAAC,CAAC,CAC9D,CACJ,CAAC,CACH,CAEAZ,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAEb,eAAe,CAAC,CACxDhB,mBAAmB,CAACgB,eAAe,CAAC,CAEtC,CAAC,CAAE,CAACrB,QAAQ,CAAEM,gBAAgB,CAAEI,aAAa,CAAEF,UAAU,CAAET,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEiC,GAAG,CAAC,CAAC,CAExE;AACAlD,SAAS,CAAC,IAAM,CACdqC,UAAU,CAAC,IAAI,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAkC,oBAAoB,CAAIjB,QAAQ,EAAK7B,mBAAmB,CAAC6B,QAAQ,CAAC,CACxE,KAAM,CAAAkB,YAAY,CAAIC,IAAI,EAAK9C,aAAa,CAAC8C,IAAI,CAAC,CAClD,KAAM,CAAAC,YAAY,CAAIC,OAAO,EAAK9C,gBAAgB,CAAC8C,OAAO,CAAC,CAE3D,GAAIvD,KAAK,CAAE,mBAAOR,KAAA,QAAAG,QAAA,EAAK,SAAO,CAACK,KAAK,EAAM,CAAC,CAC3C,GAAID,OAAO,CAAE,mBAAOT,IAAA,QAAAK,QAAA,CAAK,YAAU,CAAK,CAAC,CAEzC,mBACEH,KAAA,QACEgE,SAAS,CAAE,oBAAoBxC,OAAO,CAAG,UAAU,CAAG,EAAE,EAAG,CAC3DyC,KAAK,CAAE,CACLC,eAAe,CAAE,SAAS,CAC1BC,SAAS,CAAE,OAAO,CAClBC,OAAO,CAAE,KAAK,CACdC,MAAM,CAAE,GAAG,CACXC,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,QAAQ,CACvBC,cAAc,CAAE,eAAe,CAC/BC,UAAU,CAAE,QACd,CAAE,CAAAtE,QAAA,eAEFH,KAAA,QAAKgE,SAAS,CAAC,aAAa,CAAA7D,QAAA,eAC1BL,IAAA,CAACL,aAAa,EACZY,MAAM,CAAEA,MAAO,CACfgB,SAAS,CAAEA,SAAU,CACrBC,YAAY,CAAEA,YAAa,CAC5B,CAAC,cAEFxB,IAAA,QAAKkE,SAAS,CAAC,iBAAiB,CAAA7D,QAAA,cAC9BL,IAAA,CAACH,cAAc,EACbiB,gBAAgB,CAAEA,gBAAiB,CACnC8D,gBAAgB,CAAEf,oBAAqB,CACvCgB,QAAQ,CAAEf,YAAa,CACvBgB,QAAQ,CAAEd,YAAa,CACxB,CAAC,CACC,CAAC,cAENhE,IAAA,CAACJ,WAAW,EACVY,QAAQ,CAAEI,gBAAiB,CAC3BmE,UAAU,CAAExE,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEyE,cAAe,CACnCC,OAAO,CAAE1E,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAE0E,OAAQ,CACzB7E,QAAQ,CAAEG,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEiC,GAAI,CACtBjB,SAAS,CAAEA,SAAU,CACtB,CAAC,EACC,CAAC,cACNvB,IAAA,CAACF,MAAM,GAAE,CAAC,EACP,CAAC,CAEV,CAAC,CAED,cAAe,CAAAK,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}