{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Card,Button}from'react-bootstrap';import{BsPersonCircle}from'react-icons/bs';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VendorLogoCard=_ref=>{let{vendorId,apiUrl}=_ref;const[logoUrl,setLogoUrl]=useState('');const[previewUrl,setPreviewUrl]=useState('');const[loading,setLoading]=useState(false);const[file,setFile]=useState(null);// Fetch vendor logo on component mount\nuseEffect(()=>{const fetchLogo=async()=>{try{const response=await axios.get('/api/vendors/profile',{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`// Assuming token-based auth\n}});setLogoUrl(response.data.data.logoUrl||'');}catch(err){console.error('Error fetching vendor logo:',err);}};fetchLogo();},[apiUrl]);// Handle file selection\nconst handleFileChange=e=>{const selectedFile=e.target.files[0];setFile(selectedFile);// Generate a preview URL for the selected file\nif(selectedFile){const reader=new FileReader();reader.onloadend=()=>{setPreviewUrl(reader.result);// Set preview URL from file data\n};reader.readAsDataURL(selectedFile);}else{setPreviewUrl('');// Clear the preview if no file is selected\n}};// Handle logo upload\nconst handleUpload=async()=>{if(!file){alert('Please select a file to upload.');return;}setLoading(true);const formData=new FormData();formData.append('logo',file);try{const response=await axios.post('api/vendors/upload-logo',formData,{headers:{'Content-Type':'multipart/form-data',Authorization:`Bearer ${localStorage.getItem('token')}`}});setLogoUrl(response.data.logoUrl);// Update the logo URL after successful upload\nalert('Logo updated successfully!');}catch(err){console.error('Error uploading logo:',err);alert('Failed to upload logo.');}finally{setFile(null);// Reset file input after upload\nsetPreviewUrl('');// Clear preview\nsetLoading(false);}};return/*#__PURE__*/_jsx(Card,{className:\"text-center shadow-sm\",style:{width:'300px',margin:'1rem auto'},children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{className:\"mb-3\",children:\"Store Logo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column align-items-center\",children:[previewUrl?/*#__PURE__*/// Show the preview if an image is selected\n_jsx(\"img\",{src:previewUrl,alt:\"Preview\",className:\"rounded\",style:{width:'150px',height:'150px',objectFit:'cover',border:'2px dashed gray'}}):logoUrl?/*#__PURE__*/// Show the saved logo if no preview is available\n_jsx(\"img\",{src:logoUrl,alt:\"Vendor Logo\",className:\"rounded\",style:{width:'150px',height:'150px',objectFit:'cover'}}):/*#__PURE__*/// Show placeholder icon if no logo is available\n_jsx(BsPersonCircle,{size:150,className:\"text-secondary\"}),/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",className:\"mt-3 btn-sm\",onClick:()=>document.getElementById('fileInput').click(),children:logoUrl||previewUrl?'Edit':'Upload'}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileInput\",style:{display:'none'},accept:\"image/*\",onChange:handleFileChange})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"mt-3\",disabled:!file||loading,onClick:handleUpload,children:loading?'Uploading...':'Save'})]})});};export default VendorLogoCard;","map":{"version":3,"names":["React","useState","useEffect","axios","Card","Button","BsPersonCircle","jsx","_jsx","jsxs","_jsxs","VendorLogoCard","_ref","vendorId","apiUrl","logoUrl","setLogoUrl","previewUrl","setPreviewUrl","loading","setLoading","file","setFile","fetchLogo","response","get","headers","Authorization","localStorage","getItem","data","err","console","error","handleFileChange","e","selectedFile","target","files","reader","FileReader","onloadend","result","readAsDataURL","handleUpload","alert","formData","FormData","append","post","className","style","width","margin","children","Body","Title","src","alt","height","objectFit","border","size","variant","onClick","document","getElementById","click","type","id","display","accept","onChange","disabled"],"sources":["/Users/home/Desktop/weedhurry-platform/v1/frontend/src/components/VendorLogoCard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Card, Button } from 'react-bootstrap';\nimport { BsPersonCircle } from 'react-icons/bs';\n\nconst VendorLogoCard = ({ vendorId, apiUrl }) => {\n    const [logoUrl, setLogoUrl] = useState('');\n    const [previewUrl, setPreviewUrl] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [file, setFile] = useState(null);\n\n    // Fetch vendor logo on component mount\n    useEffect(() => {\n        const fetchLogo = async () => {\n            try {\n                const response = await axios.get('/api/vendors/profile', {\n                    headers: {\n                        Authorization: `Bearer ${localStorage.getItem('token')}`, // Assuming token-based auth\n                    },\n                });\n                setLogoUrl(response.data.data.logoUrl || '');\n            } catch (err) {\n                console.error('Error fetching vendor logo:', err);\n            }\n        };\n        fetchLogo();\n    }, [apiUrl]);\n\n    // Handle file selection\n    const handleFileChange = (e) => {\n        const selectedFile = e.target.files[0];\n        setFile(selectedFile);\n\n        // Generate a preview URL for the selected file\n        if (selectedFile) {\n            const reader = new FileReader();\n            reader.onloadend = () => {\n                setPreviewUrl(reader.result); // Set preview URL from file data\n            };\n            reader.readAsDataURL(selectedFile);\n        } else {\n            setPreviewUrl(''); // Clear the preview if no file is selected\n        }\n    };\n\n    // Handle logo upload\n    const handleUpload = async () => {\n        if (!file) {\n            alert('Please select a file to upload.');\n            return;\n        }\n        setLoading(true);\n\n        const formData = new FormData();\n        formData.append('logo', file);\n\n        try {\n            const response = await axios.post('api/vendors/upload-logo', formData, {\n                headers: {\n                    'Content-Type': 'multipart/form-data',\n                    Authorization: `Bearer ${localStorage.getItem('token')}`,\n                },\n            });\n            setLogoUrl(response.data.logoUrl); // Update the logo URL after successful upload\n            alert('Logo updated successfully!');\n        } catch (err) {\n            console.error('Error uploading logo:', err);\n            alert('Failed to upload logo.');\n        } finally {\n            setFile(null); // Reset file input after upload\n            setPreviewUrl(''); // Clear preview\n            setLoading(false);\n        }\n    };\n\n    return (\n        <Card className=\"text-center shadow-sm\" style={{ width: '300px', margin: '1rem auto' }}>\n            <Card.Body>\n                <Card.Title className=\"mb-3\">Store Logo</Card.Title>\n                <div className=\"d-flex flex-column align-items-center\">\n                    {previewUrl ? (\n                        // Show the preview if an image is selected\n                        <img\n                            src={previewUrl}\n                            alt=\"Preview\"\n                            className=\"rounded\"\n                            style={{ width: '150px', height: '150px', objectFit: 'cover', border: '2px dashed gray' }}\n                        />\n                    ) : logoUrl ? (\n                        // Show the saved logo if no preview is available\n                        <img\n                            src={logoUrl}\n                            alt=\"Vendor Logo\"\n                            className=\"rounded\"\n                            style={{ width: '150px', height: '150px', objectFit: 'cover' }}\n                        />\n                    ) : (\n                        // Show placeholder icon if no logo is available\n                        <BsPersonCircle size={150} className=\"text-secondary\" />\n                    )}\n                    <Button\n                        variant=\"outline-secondary\"\n                        className=\"mt-3 btn-sm\"\n                        onClick={() => document.getElementById('fileInput').click()}\n                    >\n                        {logoUrl || previewUrl ? 'Edit' : 'Upload'}\n                    </Button>\n                    <input\n                        type=\"file\"\n                        id=\"fileInput\"\n                        style={{ display: 'none' }}\n                        accept=\"image/*\"\n                        onChange={handleFileChange}\n                    />\n                </div>\n                <Button\n                    variant=\"primary\"\n                    className=\"mt-3\"\n                    disabled={!file || loading}\n                    onClick={handleUpload}\n                >\n                    {loading ? 'Uploading...' : 'Save'}\n                </Button>\n            </Card.Body>\n        </Card>\n    );\n};\n\nexport default VendorLogoCard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}