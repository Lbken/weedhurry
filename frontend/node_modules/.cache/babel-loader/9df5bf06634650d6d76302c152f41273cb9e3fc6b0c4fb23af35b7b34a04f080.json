{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Form,Button,Alert}from'react-bootstrap';import MapComponent from'./MapComponent';import api from'../api/api';// Update the path based on your folder structure\nimport{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function UpdateDeliveryZoneComponent(_ref){let{isLoaded,loadError}=_ref;const[deliveryZone,setDeliveryZone]=useState(null);const[error,setError]=useState('');const[success,setSuccess]=useState('');useEffect(()=>{const fetchDeliveryZone=async()=>{try{var _response$data,_response$data$delive;const response=await api.get('/api/vendors/delivery-zone');if((_response$data=response.data)!==null&&_response$data!==void 0&&(_response$data$delive=_response$data.deliveryZone)!==null&&_response$data$delive!==void 0&&_response$data$delive.coordinates){const[lng,lat]=response.data.deliveryZone.coordinates;setDeliveryZone({lat,lng});setError('');}}catch(error){var _error$response,_error$response$data;console.error('Error fetching delivery zone:',error);setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to load delivery zone. Please try again later.');}};if(isLoaded){fetchDeliveryZone();}},[isLoaded]);const handleUpdateDeliveryZone=async()=>{if(!(deliveryZone!==null&&deliveryZone!==void 0&&deliveryZone.lat)||!(deliveryZone!==null&&deliveryZone!==void 0&&deliveryZone.lng)){setError('Please select a valid delivery zone before updating.');return;}try{const geoJsonDeliveryZone={type:'Point',coordinates:[deliveryZone.lng,deliveryZone.lat]};const response=await api.put('/api/vendors/delivery-zone',{deliveryZone:geoJsonDeliveryZone});if(response.data.success){setSuccess('Delivery zone updated successfully!');setError('');}else{setError(response.data.message||'Failed to update delivery zone.');}}catch(error){var _error$response2,_error$response2$data;console.error('Error updating delivery zone:',error);setError(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'An error occurred while updating delivery zone.');}};if(loadError)return/*#__PURE__*/_jsxs(Alert,{variant:\"danger\",children:[\"Error loading map: \",loadError]});if(!isLoaded)return/*#__PURE__*/_jsx(Alert,{variant:\"info\",children:\"Loading map...\"});return/*#__PURE__*/_jsxs(Form,{className:\"p-4 border rounded shadow-sm\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-3\",children:\"Delivery Zone\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Orders will be limited to within 20-mile radius of marker.\"}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),success&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:success}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3 rounded border overflow-hidden\",style:{height:'400px'},children:/*#__PURE__*/_jsx(MapComponent,{onLocationChange:setDeliveryZone,initialLocation:deliveryZone})}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleUpdateDeliveryZone,className:\"mt-3 px-4 py-2\",disabled:!deliveryZone,children:\"Update Delivery Zone\"})})]});}export default UpdateDeliveryZoneComponent;","map":{"version":3,"names":["React","useState","useEffect","Form","Button","Alert","MapComponent","api","jsxs","_jsxs","jsx","_jsx","UpdateDeliveryZoneComponent","_ref","isLoaded","loadError","deliveryZone","setDeliveryZone","error","setError","success","setSuccess","fetchDeliveryZone","_response$data","_response$data$delive","response","get","data","coordinates","lng","lat","_error$response","_error$response$data","console","message","handleUpdateDeliveryZone","geoJsonDeliveryZone","type","put","_error$response2","_error$response2$data","variant","children","className","style","height","onLocationChange","initialLocation","onClick","disabled"],"sources":["/Users/home/Desktop/weedhurry-platform/v1/frontend/src/components/UpdateDeliveryZoneComponent.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Form, Button, Alert } from 'react-bootstrap';\nimport MapComponent from './MapComponent';\nimport api from '../api/api'; // Update the path based on your folder structure\n\nfunction UpdateDeliveryZoneComponent({ isLoaded, loadError }) {\n  const [deliveryZone, setDeliveryZone] = useState(null);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  useEffect(() => {\n    const fetchDeliveryZone = async () => {\n      try {\n        const response = await api.get('/api/vendors/delivery-zone');\n\n        if (response.data?.deliveryZone?.coordinates) {\n          const [lng, lat] = response.data.deliveryZone.coordinates;\n          setDeliveryZone({ lat, lng });\n          setError('');\n        }\n      } catch (error) {\n        console.error('Error fetching delivery zone:', error);\n        setError(error.response?.data?.message || 'Failed to load delivery zone. Please try again later.');\n      }\n    };\n\n    if (isLoaded) {\n      fetchDeliveryZone();\n    }\n  }, [isLoaded]);\n\n  const handleUpdateDeliveryZone = async () => {\n    if (!deliveryZone?.lat || !deliveryZone?.lng) {\n      setError('Please select a valid delivery zone before updating.');\n      return;\n    }\n\n    try {\n      const geoJsonDeliveryZone = {\n        type: 'Point',\n        coordinates: [deliveryZone.lng, deliveryZone.lat]\n      };\n\n      const response = await api.put('/api/vendors/delivery-zone', {\n        deliveryZone: geoJsonDeliveryZone\n      });\n\n      if (response.data.success) {\n        setSuccess('Delivery zone updated successfully!');\n        setError('');\n      } else {\n        setError(response.data.message || 'Failed to update delivery zone.');\n      }\n    } catch (error) {\n      console.error('Error updating delivery zone:', error);\n      setError(error.response?.data?.message || 'An error occurred while updating delivery zone.');\n    }\n  };\n\n  if (loadError) return <Alert variant=\"danger\">Error loading map: {loadError}</Alert>;\n  if (!isLoaded) return <Alert variant=\"info\">Loading map...</Alert>;\n\n  return (\n    <Form className=\"p-4 border rounded shadow-sm\">\n      <h5 className=\"mb-3\">Delivery Zone</h5>\n      <p className=\"text-muted\">\n        Orders will be limited to within 20-mile radius of marker.\n      </p>\n      {error && <Alert variant=\"danger\">{error}</Alert>}\n      {success && <Alert variant=\"success\">{success}</Alert>}\n      <div className=\"mb-3 rounded border overflow-hidden\" style={{ height: '400px' }}>\n        <MapComponent\n          onLocationChange={setDeliveryZone}\n          initialLocation={deliveryZone}\n        />\n      </div>\n      <div className=\"d-flex justify-content-center\">\n        <Button \n          variant=\"primary\" \n          onClick={handleUpdateDeliveryZone} \n          className=\"mt-3 px-4 py-2\"\n          disabled={!deliveryZone}\n        >\n          Update Delivery Zone\n        </Button>\n      </div>\n    </Form>\n  );\n}\n\nexport default UpdateDeliveryZoneComponent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}